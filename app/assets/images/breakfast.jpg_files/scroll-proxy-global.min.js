!function(e,n){"use strict";n(e)}(this,function(e){"use strict";if(!window.CEROS_SCROLL_PROXY_LOADED){window.CEROS_SCROLL_PROXY_LOADED=!0;for(var n="ceros-embedded-viewport:",t={PING:"ping",READY:"ready",POSITION:"position",SCROLL_TO:"scroll-to",GOTO_URL:"goto-url"},i=[],o=function(e){var n=e.getBoundingClientRect(),i={top:-n.top,bottom:window.innerHeight-n.top};d(e,t.POSITION,i)},r=function(){for(var e=0;e<i.length;e++)o(i[e])},s=function(e,n){for(var t=null,i=0;i<e.length;i++)if(e[i].contentWindow===n){t=e[i];break}return t},a=function(e){var n=s(document.getElementsByTagName("iframe"),e);n&&(i.push(n),o(n))},w=function(e,n){var t=s(i,e);if(t){var o=Math.max(0,n.scrollPosition-n.pageHeight+n.visibleHeight),r=t.getBoundingClientRect(),a=window.pageYOffset+r.top,w=window.pageYOffset+r.bottom,c=o*(r.bottom-r.top)/n.visibleHeight,d=w-window.innerHeight;window.scroll(0,Math.min(c+a,d))}},c=function(e,n){n.urlOpenInNewWindow?window.open(n.url):window.location=n.url},d=function(e,t,i){var o={event:n+t};if(i)for(var r in i)i.hasOwnProperty(r)&&(o[r]=i[r]);var s=JSON.stringify(o);e.contentWindow.postMessage(s,"*")},u=document.getElementsByTagName("iframe"),f=0;f<u.length;f++)i.indexOf(-1===u[f])&&d(u[f],t.PING);window.sendViewportPositionEvent=o,window.addEventListener("message",function(e){var i,o;try{o=(i=JSON.parse(e.data))&&i.event&&i.event.substr(0,n.length)===n}catch(e){return}if(o)switch(i.event.substr(n.length)){case t.READY:a(e.source);break;case t.SCROLL_TO:w(e.source,i);break;case t.GOTO_URL:c(e.source,i)}}),window.addEventListener("scroll",r),window.addEventListener("resize",r)}});
